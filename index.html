<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Franguinho Runner</title>
<style>
  body {
    background: #222;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: white;
    font-family: Arial;
  }

  #menu {
    margin-top: 20px;
    text-align: center;
  }

  #game {
    background: #111;
    border: 3px solid #fff;
    margin-top: 10px;
    display: none;
  }

  #info {
    margin-top: 10px;
    font-size: 18px;
  }

  #controles {
    margin-top: 20px;
    display: none;
  }

  .btn {
    padding: 12px 30px;
    background: orange;
    margin: 5px;
    color: #000;
    border-radius: 8px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>üêî Franguinho Runner</h1>

<div id="menu">
  <button id="startBtn" class="btn">Iniciar Jogo</button>
</div>

<canvas id="game" width="360" height="500"></canvas>

<div id="info">Moedas: 0 | Desconto: R$0.00 | Recorde: 0</div>

<div id="controles">
  <button class="btn" id="leftBtn">‚¨ÖÔ∏è</button>
  <button class="btn" id="rightBtn">‚û°Ô∏è</button>
</div>

<script>
/* ============================
      VARI√ÅVEIS DO JOGO
============================ */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let frango = { x: 150, y: 420, size: 60 };
let moedas = [];
let obstaculos = [];
let score = 0;
let desconto = 0;
let recorde = parseInt(localStorage.getItem("rec")) || 0;

let esquerda = false;
let direita = false;
let rodando = false;

document.getElementById("info").innerText =
`Moedas: 0 | Desconto: R$0.00 | Recorde: ${recorde}`;

/* ============================
     DESENHO DO FRANGUINHO
============================ */
function desenharFrango(x, y) {
  // corpo
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(x + 30, y + 30, 28, 0, Math.PI * 2);
  ctx.fill();

  // olho
  ctx.fillStyle = "black";
  ctx.beginPath();
  ctx.arc(x + 40, y + 25, 5, 0, Math.PI * 2);
  ctx.fill();

  // bico
  ctx.fillStyle = "orange";
  ctx.beginPath();
  ctx.moveTo(x + 55, y + 30);
  ctx.lineTo(x + 70, y + 35);
  ctx.lineTo(x + 55, y + 40);
  ctx.fill();

  // crista
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(x + 20, y + 10, 8, 0, Math.PI * 2);
  ctx.fill();
}

/* ============================
      OBJETOS DO JOGO
============================ */
function criarMoeda() {
  moedas.push({
    x: Math.random() * 330,
    y: -20,
    size: 20,
    speed: 3
  });
}

function criarObstaculo() {
  obstaculos.push({
    x: Math.random() * 330,
    y: -25,
    size: 35,
    speed: 4
  });
}

/* ============================
      LOOP PRINCIPAL
============================ */
function atualizar() {
  if (!rodando) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (Math.random() < 0.04) criarMoeda();
  if (Math.random() < 0.05) criarObstaculo();

  moedas.forEach(m => m.y += m.speed);
  obstaculos.forEach(o => o.y += o.speed);

  moedas = moedas.filter(m => m.y < 600);
  obstaculos = obstaculos.filter(o => o.y < 600);

  if (esquerda && frango.x > 0) frango.x -= 5;
  if (direita && frango.x < 300) frango.x += 5;

  // desenhar frango
  desenharFrango(frango.x, frango.y);

  // moedas
  moedas.forEach(m => {
    ctx.fillStyle = "gold";
    ctx.beginPath();
    ctx.arc(m.x, m.y, m.size, 0, Math.PI * 2);
    ctx.fill();

    // colis√£o
    if (
      frango.x < m.x + m.size &&
      frango.x + frango.size > m.x &&
      frango.y < m.y + m.size &&
      frango.y + frango.size > m.y
    ) {
      score++;
      desconto = score * 0.10;
      moedas.splice(moedas.indexOf(m), 1);

      document.getElementById("info").innerText =
      `Moedas: ${score} | Desconto: R$${desconto.toFixed(2)} | Recorde: ${recorde}`;
    }
  });

  // obst√°culos
  obstaculos.forEach(o => {
    ctx.fillStyle = "red";
    ctx.fillRect(o.x, o.y, o.size, o.size);

    if (
      frango.x < o.x + o.size &&
      frango.x + frango.size > o.x &&
      frango.y < o.y + o.size &&
      frango.y + frango.size > o.y
    ) {
      rodando = false;

      if (score > recorde) {
        recorde = score;
        localStorage.setItem("rec", recorde);
      }

      alert(`üêî O franguinho bateu!\nMoedas: ${score}\nDesconto: R$${desconto.toFixed(2)}`);

      location.reload();
    }
  });

  requestAnimationFrame(atualizar);
}

/* ============================
      CONTROLES
============================ */
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") esquerda = true;
  if (e.key === "ArrowRight") direita = true;
});
document.addEventListener("keyup", e => {
  if (e.key === "ArrowLeft") esquerda = false;
  if (e.key === "ArrowRight") direita = false;
});

document.getElementById("leftBtn").onclick = () => esquerda = true;
document.getElementById("rightBtn").onclick = () => direita = true;

/* ============================
      INICIAR JOGO
============================ */
document.getElementById("startBtn").addEventListener("click", () => {
  document.getElementById("menu").style.display = "none";
  document.getElementById("controles").style.display = "block";
  canvas.style.display = "block";
  rodando = true;
  atualizar();
});
</script>

</body>
</html>
