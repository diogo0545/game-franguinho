<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Super Franguinho Dash</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #fff5e6;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    #menu {
      text-align: center;
      position: absolute;
      top: 40%;
      transform: translateY(-50%);
    }

    #menu h1 {
      font-size: 36px;
      color: #d35400;
      margin-bottom: 10px;
    }

    #menu button {
      padding: 14px 28px;
      font-size: 20px;
      background: #ffa94d;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0px 4px 10px #00000022;
    }

    #menu p {
      font-size: 20px;
      color: #d35400;
      margin-top: 10px;
    }

    #info {
      position: absolute;
      top: 10px;
      font-size: 20px;
      font-weight: bold;
      color: #d35400;
    }

    #game {
      background: #fff;
      border: 3px solid #ffa94d;
      border-radius: 12px;
      display: none;
    }

    /* Tela de Game Over */
    #gameover {
      display: none;
      position: absolute;
      text-align: center;
      top: 30%;
      width: 100%;
    }

    #gameover h2 {
      color: #c0392b;
      font-size: 32px;
      margin-bottom: 10px;
    }

    #gameover button {
      padding: 12px 25px;
      font-size: 20px;
      background: #ffa94d;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 15px;
    }
  </style>
</head>
<body>

<div id="menu">
  <h1>üêî Super Franguinho Dash</h1>
  <button id="startBtn">Come√ßar</button>
  <p>Cada moeda vale R$0,10 de desconto!</p>
</div>

<div id="info">Moedas: 0 | Desconto: R$0,00 | Recorde: 0</div>

<canvas id="game" width="350" height="500"></canvas>

<div id="gameover">
  <h2>GAME OVER</h2>
  <p id="finalScore"></p>
  <p id="cupom"></p>
  <button onclick="restartGame()">Jogar Novamente</button>
</div>
<script>
/* ============================
      IMAGENS E SONS
============================ */

const frangoImg = new Image();
frangoImg.src = "https://i.imgur.com/7kCEHoE.png";

const moedaImg = new Image();
moedaImg.src = "https://i.imgur.com/Heq6T5r.png";

const explosaoImg = new Image();
explosaoImg.src = "https://i.imgur.com/7T2C2Xz.png";

const somMoeda = new Audio("https://cdn.pixabay.com/download/audio/2021/08/04/audio_49482b561d.mp3?filename=coin-collect-1-199573.mp3");
const somBateu = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_54e7b72d78.mp3?filename=wrong-38586.mp3");

/* ============================
      VARI√ÅVEIS DO JOGO
============================ */

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let frango = { x: 150, y: 400, size: 55, speed: 6 };
let objetos = [];
let moedas = [];
let score = 0;
let desconto = 0;
let recorde = 0;

let moveLeft = false;
let moveRight = false;
let jogoRodando = false;

if (localStorage.getItem("recorde")) {
  recorde = parseInt(localStorage.getItem("recorde"));
}

/* Atualiza texto superior */
function atualizarInfo() {
  document.getElementById("info").textContent =
    `Moedas: ${score} | Desconto: R$${desconto.toFixed(2)} | Recorde: ${recorde}`;
}

/* ============================
      CRIA√á√ÉO DOS OBJETOS
============================ */

function criarObjeto() {
  objetos.push({
    x: Math.random() * 320,
    y: -20,
    size: 35,
    speed: 4 + Math.random() * 2
  });
}

function criarMoeda() {
  moedas.push({
    x: Math.random() * 320,
    y: -20,
    size: 25,
    speed: 3
  });
}

/* ============================
      DESENHO NA TELA
============================ */

function desenharFrango() {
  ctx.drawImage(frangoImg, frango.x, frango.y, frango.size, frango.size);
}

function desenharObjetos() {
  ctx.fillStyle = "#e74c3c";
  objetos.forEach(o => {
    ctx.fillRect(o.x, o.y, o.size, o.size);
  });
}

function desenharMoedas() {
  moedas.forEach(m => {
    ctx.drawImage(moedaImg, m.x, m.y, m.size, m.size);
  });
}

/* Explos√£o */
function desenharExplosao(x, y) {
  ctx.drawImage(explosaoImg, x - 20, y - 20, 80, 80);
}
</script>
<script>
/* ============================
      LOOP PRINCIPAL DO JOGO
============================ */

function atualizar() {
  if (!jogoRodando) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Criar objetos inimigos
  if (Math.random() < 0.03) criarObjeto();
  if (Math.random() < 0.02) criarMoeda();

  // Movimento dos obst√°culos
  objetos.forEach(o => o.y += o.speed);
  moedas.forEach(m => m.y += m.speed);

  // Remover os que saem da tela
  objetos = objetos.filter(o => o.y < 520);
  moedas = moedas.filter(m => m.y < 520);

  // Movimenta√ß√£o do frango (bot√µes e celular)
  if (moveLeft && frango.x > 0) frango.x -= frango.speed;
  if (moveRight && frango.x < 300) frango.x += frango.speed;

  // Colis√£o com obst√°culos
  objetos.forEach(o => {
    if (
      frango.x < o.x + o.size &&
      frango.x + frango.size > o.x &&
      frango.y < o.y + o.size &&
      frango.y + frango.size > o.y
    ) {
      somBateu.play();
      desenharExplosao(frango.x, frango.y);

      jogoRodando = false;

      if (score > recorde) {
        recorde = score;
        localStorage.setItem("recorde", recorde);
      }

      setTimeout(() => {
        alert(
          `üêî O franguinho foi atingido!\n\n` +
          `Moedas coletadas: ${score}\n` +
          `Desconto: R$${desconto.toFixed(2)}\n\n` +
          `Recorde: ${recorde}`
        );
        document.location.reload();
      }, 300);
    }
  });

  // Colis√£o com moedas
  moedas.forEach((m, i) => {
    if (
      frango.x < m.x + m.size &&
      frango.x + frango.size > m.x &&
      frango.y < m.y + m.size &&
      frango.y + frango.size > m.y
    ) {
      somMoeda.play();
      score++;
      desconto = score * 0.10;
      moedas.splice(i, 1);
      atualizarInfo();
    }
  });

  // Renderiza elementos
  desenharFrango();
  desenharObjetos();
  desenharMoedas();

  // Loop cont√≠nuo
  requestAnimationFrame(atualizar);
}

/* ============================
      CONTROLES DO TECLADO
============================ */
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") moveLeft = true;
  if (e.key === "ArrowRight") moveRight = true;
});
document.addEventListener("keyup", e => {
  if (e.key === "ArrowLeft") moveLeft = false;
  if (e.key === "ArrowRight") moveRight = false;
});
</script>
    // ==============================
    // MOVIMENTA√á√ÉO DO FRANGO
    // ==============================
    function updatePlayer() {
        if (keys.ArrowLeft) {
            player.x -= player.speed;
            player.direction = "left";
        }
        if (keys.ArrowRight) {
            player.x += player.speed;
            player.direction = "right";
        }
        if (keys.ArrowUp) {
            player.y -= player.speed;
            player.direction = "up";
        }
        if (keys.ArrowDown) {
            player.y += player.speed;
            player.direction = "down";
        }

        // Mant√©m dentro da tela
        if (player.x < 0) player.x = 0;
        if (player.x > canvas.width - player.w) player.x = canvas.width - player.w;
        if (player.y < 0) player.y = 0;
        if (player.y > canvas.height - player.h) player.y = canvas.height - player.h;

        // Anima√ß√£o
        if (keys.ArrowLeft || keys.ArrowRight || keys.ArrowUp || keys.ArrowDown) {
            player.frame++;
            if (player.frame > 20) {
                player.frame = 0;
                player.step = (player.step + 1) % 4;
            }
        } else {
            player.step = 0;
        }
    }

    // ==============================
    // ATUALIZA√á√ïES DO JOGO
    // ==============================
    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        updatePlayer();
        drawPlayer();

        requestAnimationFrame(gameLoop);
    }

    // Iniciar jogo
    window.onload = function () {
        gameLoop();
    };
</script>
</body>
</html>
