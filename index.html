<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Franguinho Game</title>

<style>
  body {
    margin: 0;
    background: #222;
    font-family: Arial, sans-serif;
    user-select: none;
    text-align: center;
  }

  #menu {
    color: white;
    margin-top: 40px;
  }

  #startBtn {
    font-size: 20px;
    padding: 12px 25px;
    background: #ffcc00;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }

  #info {
    color: white;
    font-size: 18px;
    margin-top: 5px;
  }

  canvas {
    background: #111;
    display: none;
    margin-top: 10px;
  }

  /* Bot√µes de controle */
  #controles {
    position: absolute;
    bottom: 40px; /* MAIS PARA CIMA */
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 40px;
  }

  .btn {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: #ffcc00;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 35px;
    cursor: pointer;
    user-select: none;
  }
</style>
</head>

<body>

<div id="menu">
  <h1>üêî FRANGUINHO GAME</h1>
  <button id="startBtn">Iniciar Jogo</button>
</div>

<p id="info"></p>

<canvas id="game" width="360" height="520"></canvas>

<div id="controles" style="display:none;">
  <div class="btn" id="leftBtn">‚¨ÖÔ∏è</div>
  <div class="btn" id="rightBtn">‚û°Ô∏è</div>
</div>

<script>
/* ============================
      IMAGENS
============================ */
const frangoImg = new Image();
frangoImg.src = "https://i.imgur.com/7kCEHoE.png";

const moedaImg = new Image();
moedaImg.src = "https://i.imgur.com/Heq6T5r.png";

const explosaoImg = new Image();
explosaoImg.src = "https://i.imgur.com/7T2C2Xz.png";

/* ============================
      SONS
============================ */
const somMoeda = new Audio("https://cdn.pixabay.com/download/audio/2021/08/04/audio_49482b561d.mp3?filename=coin-collect-1-199573.mp3");
const somBateu = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_54e7b72d78.mp3?filename=wrong-38586.mp3");

/* ============================
      VARI√ÅVEIS
============================ */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let frango = { x: 150, y: 430, size: 70 };
let objetos = [];
let moedas = [];

let score = 0;
let desconto = 0;
let recorde = localStorage.getItem("recorde") ? parseInt(localStorage.getItem("recorde")) : 0;

let moveLeft = false;
let moveRight = false;
let jogoRodando = false;

function atualizarInfo() {
  document.getElementById("info").textContent =
    `Moedas: ${score} | Desconto: R$${desconto.toFixed(2)} | Recorde: ${recorde}`;
}

/* ============================
      CRIA√á√ÉO DOS OBJETOS
============================ */
function criarObjeto() {
  objetos.push({
    x: Math.random() * 320,
    y: -40,
    size: 40,
    speed: 3 + Math.random() * 2
  });
}

function criarMoeda() {
  moedas.push({
    x: Math.random() * 320,
    y: -40,
    size: 30,
    speed: 3
  });
}

/* ============================
      DESENHO
============================ */
function desenharFrango() {
  ctx.drawImage(frangoImg, frango.x, frango.y, frango.size, frango.size);
}

function desenharObjetos() {
  ctx.fillStyle = "red";
  objetos.forEach(o => ctx.fillRect(o.x, o.y, o.size, o.size));
}

function desenharMoedas() {
  moedas.forEach(m => ctx.drawImage(moedaImg, m.x, m.y, m.size, m.size));
}

/* ============================
      LOOP PRINCIPAL
============================ */
function atualizar() {
  if (!jogoRodando) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (Math.random() < 0.03) criarObjeto();
  if (Math.random() < 0.03) criarMoeda();

  objetos.forEach(o => o.y += o.speed);
  moedas.forEach(m => m.y += m.speed);

  objetos = objetos.filter(o => o.y < 600);
  moedas = moedas.filter(m => m.y < 600);

  if (moveLeft && frango.x > 0) frango.x -= 5;
  if (moveRight && frango.x < canvas.width - frango.size) frango.x += 5;

  objetos.forEach(o => {
    if (
      frango.x < o.x + o.size &&
      frango.x + frango.size > o.x &&
      frango.y < o.y + o.size &&
      frango.y + frango.size > o.y
    ) {
      somBateu.play();
      jogoRodando = false;

      if (score > recorde) {
        recorde = score;
        localStorage.setItem("recorde", recorde);
      }

      setTimeout(() => {
        alert(
          `üêî O frango bateu!\n\nMoedas: ${score}\nDesconto: R$${desconto.toFixed(2)}\nRecorde: ${recorde}`
        );
        document.location.reload();
      }, 300);
    }
  });

  moedas.forEach((m, i) => {
    if (
      frango.x < m.x + m.size &&
      frango.x + frango.size > m.x &&
      frango.y < m.y + m.size &&
      frango.y + frango.size > m.y
    ) {
      somMoeda.play();
      score++;
      desconto = score * 0.10;
      moedas.splice(i, 1);
      atualizarInfo();
    }
  });

  desenharFrango();
  desenharObjetos();
  desenharMoedas();

  requestAnimationFrame(atualizar);
}

/* ============================
      CONTROLES
============================ */
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") moveLeft = true;
  if (e.key === "ArrowRight") moveRight = true;
});

document.addEventListener("keyup", e => {
  if (e.key === "ArrowLeft") moveLeft = false;
  if (e.key === "ArrowRight") moveRight = false;
});

/* MOBILE BUTTONS */
leftBtn.addEventListener("touchstart", () => moveLeft = true);
leftBtn.addEventListener("touchend", () => moveLeft = false);

rightBtn.addEventListener("touchstart", () => moveRight = true);
rightBtn.addEventListener("touchend", () => moveRight = false);

/* ============================
      INICIAR O JOGO
============================ */
document.getElementById("startBtn").addEventListener("click", () => {
  document.getElementById("menu").style.display = "none";
  canvas.style.display = "block";
  document.getElementById("controles").style.display = "flex";
  jogoRodando = true;
  atualizarInfo();
  atualizar();
});
</script>

</body>
</html>
