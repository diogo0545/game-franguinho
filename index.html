import pygame
import sys

pygame.init()

# ---------------- CONFIGURAÇÃO DA TELA (adaptação automática) ---------------- #
info = pygame.display.Info()
LARGURA = info.current_w
ALTURA = info.current_h

# Limita mínimo para PC
if LARGURA < 800:
    LARGURA = 800
if ALTURA < 600:
    ALTURA = 600

TELA = pygame.display.set_mode((LARGURA, ALTURA))
pygame.display.set_caption("Jogo do Franguinho")

FPS = 60
clock = pygame.time.Clock()

# ---------------- CORES ---------------- #
BRANCO = (255, 255, 255)
PRETO = (0, 0, 0)
LARANJA = (255, 140, 0)
AMARELO = (255, 220, 100)
VERMELHO = (220, 40, 40)
CINZA = (180, 180, 180)

# ---------------- PERSONAGEM ---------------- #
player = pygame.Rect(LARGURA // 2 - 20, ALTURA - 120, 50, 50)
vel_x = 12  # MAIS RÁPIDO PARA CELULAR
vel_y = 0
gravidade = 1
no_chao = True

# ---------------- BOTÕES (AGORA GIGANTES) ---------------- #
btn_inicio = pygame.Rect(LARGURA//2 - 200, ALTURA//2 - 150, 400, 200)

btn_esquerda = pygame.Rect(50, ALTURA - 180, 200, 150)
btn_direita = pygame.Rect(270, ALTURA - 180, 200, 150)
btn_pular = pygame.Rect(LARGURA - 250, ALTURA - 180, 200, 150)

tela_inicial = True

# ---------------- DESENHAR FRANGUINHO ---------------- #
def desenhar_frango(surface, x, y):
    pygame.draw.circle(surface, AMARELO, (x + 25, y + 25), 25)
    pygame.draw.circle(surface, PRETO, (x + 32, y + 18), 5)
    pygame.draw.polygon(surface, LARANJA, [
        (x + 45, y + 25),
        (x + 60, y + 30),
        (x + 45, y + 35)
    ])
    pygame.draw.circle(surface, VERMELHO, (x + 15, y + 5), 8)
    pygame.draw.circle(surface, VERMELHO, (x + 22, y + 3), 6)

# ---------------- LOOP PRINCIPAL ---------------- #
while True:
    clock.tick(FPS)

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

        # CLICK
        if event.type == pygame.MOUSEBUTTONDOWN:
            mx, my = pygame.mouse.get_pos()

            # INICIAR JOGO
            if tela_inicial and btn_inicio.collidepoint(mx, my):
                tela_inicial = False

            # CONTROLES
            if not tela_inicial:
                if btn_esquerda.collidepoint(mx, my):
                    player.x -= vel_x
                if btn_direita.collidepoint(mx, my):
                    player.x += vel_x
                if btn_pular.collidepoint(mx, my) and no_chao:
                    vel_y = -18
                    no_chao = False

    # ---------------- TELA INICIAL ---------------- #
    if tela_inicial:
        TELA.fill(BRANCO)
        pygame.draw.rect(TELA, AMARELO, btn_inicio, border_radius=40)

        font = pygame.font.SysFont(None, 90)
        txt = font.render("INICIAR", True, PRETO)
        TELA.blit(txt, (btn_inicio.x + 80, btn_inicio.y + 70))

        pygame.display.update()
        continue

    # ---------------- FÍSICA ---------------- #
    vel_y += gravidade
    player.y += vel_y

    # Colisão com o chão
    chao = ALTURA - 200
    if player.y >= chao:
        player.y = chao
        vel_y = 0
        no_chao = True

    # ---------------- DESENHO DO JOGO ---------------- #
    TELA.fill(BRANCO)

    # Franguinho
    desenhar_frango(TELA, player.x, player.y)

    # Botões
    pygame.draw.rect(TELA, CINZA, btn_esquerda, border_radius=30)
    pygame.draw.rect(TELA, CINZA, btn_direita, border_radius=30)
    pygame.draw.rect(TELA, CINZA, btn_pular, border_radius=30)

    font = pygame.font.SysFont(None, 70)
    TELA.blit(font.render("←", True, PRETO), (btn_esquerda.x + 75, btn_esquerda.y + 45))
    TELA.blit(font.render("→", True, PRETO), (btn_direita.x + 75, btn_direita.y + 45))
    TELA.blit(font.render("PULAR", True, PRETO), (btn_pular.x + 25, btn_pular.y + 45))

    pygame.display.update()
