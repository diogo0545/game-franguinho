<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Franguinho Runner</title>

<style>
  body {
    margin: 0;
    background: #1a1a1a;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: Arial;
    color: white;
    overflow: hidden;
  }

  h1 {
    margin-top: 10px;
  }

  #game {
    background: #000;
    border: 3px solid white;
    display: none;
    position: relative;
    z-index: 5;
  }

  #startBtn {
    padding: 16px 40px;
    background: orange;
    color: black;
    border-radius: 12px;
    font-size: 28px;
    font-weight: bold;
    margin-top: 20px;
    cursor: pointer;
    z-index: 20;
    position: relative;
  }

  #info {
    margin-top: 10px;
    font-size: 22px;
  }

  /* BOT√ïES MOBILE GRAND√ïES */
  #controles {
    width: 100%;
    margin-top: 20px;
    justify-content: space-around;
    display: none; /* AGORA FUNCIONA */
    z-index: 10;
  }

  .btn {
    background: orange;
    padding: 20px 40px;
    font-size: 40px;
    border-radius: 12px;
    color: black;
    font-weight: bold;
    user-select: none;
  }

  @media (max-width: 768px) {
    #game {
      width: 90vw !important;
      height: calc(90vh - 200px) !important;
    }

    .btn {
      padding: 25px 50px;
      font-size: 48px;
    }

    #startBtn {
      font-size: 34px;
      padding: 20px 50px;
    }

    #info {
      font-size: 26px;
    }
  }
</style>
</head>
<body>

<h1>üêî Franguinho Runner</h1>

<button id="startBtn">INICIAR</button>

<canvas id="game" width="360" height="600"></canvas>

<div id="info">Moedas: 0 | Desconto: R$0.00 | Recorde: 0</div>

<div id="controles">
  <div class="btn" id="leftBtn">‚¨ÖÔ∏è</div>
  <div class="btn" id="rightBtn">‚û°Ô∏è</div>
</div>

<script>
/* ===========================
   IMAGENS Base64
================================ */
const frangoImg = new Image();
frangoImg.src =
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIElEQVR4nGP8z4APMOGVH8MwCjAyYMQA0yYEgRDIozGMAADQNgH4WfF42QAAAABJRU5ErkJggg==";

const moedaImg = new Image();
moedaImg.src =
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAK0lEQVR4nGNkYGBg+A8EwDiqgWFWoGgGm0BxiGwGDFgBiIdA60CAO0sB9bctRHYAAAAASUVORK5CYII=";

const obstImg = new Image();
obstImg.src =
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKUlEQVR4nGNkYGBg+A9EwBiqgWFWoGgGm0BxSG4GDBgBiIdA6wEAAJ/xB6OVYo7QAAAAASUVORK5CYII=";

/* ===========================
   VARI√ÅVEIS DO JOGO
================================ */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let frango = { x: 150, y: 500, size: 60 };
let moedas = [];
let obst = [];

let score = 0;
let desconto = 0;
let recorde = localStorage.getItem("recorde") || 0;

let esquerda = false;
let direita = false;
let rodando = false;

/* ===========================
   AJUSTE MOBILE
================================ */
function ajustarProporcao() {
  if (window.innerWidth < 768) {
    canvas.width = window.innerWidth * 0.9;
    canvas.height = window.innerHeight * 0.7;
    frango.size = canvas.width * 0.15;
  }
}

ajustarProporcao();
window.onresize = ajustarProporcao;

/* ===========================
   OBJETOS
================================ */
function criarMoeda() {
  moedas.push({
    x: Math.random() * (canvas.width - 40),
    y: -30,
    size: frango.size * 0.6,
    speed: 4
  });
}

function criarObst() {
  obst.push({
    x: Math.random() * (canvas.width - 40),
    y: -40,
    size: frango.size * 0.8,
    speed: 5
  });
}

/* ===========================
   LOOP
================================ */
function atualizar() {
  if (!rodando) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (Math.random() < 0.04) criarMoeda();
  if (Math.random() < 0.03) criarObst();

  if (esquerda && frango.x > 0) frango.x -= 6;
  if (direita && frango.x < canvas.width - frango.size) frango.x += 6;

  ctx.drawImage(frangoImg, frango.x, frango.y, frango.size, frango.size);

  moedas.forEach((m) => {
    m.y += m.speed;
    ctx.drawImage(moedaImg, m.x, m.y, m.size, m.size);

    if (
      frango.x < m.x + m.size &&
      frango.x + frango.size > m.x &&
      frango.y < m.y + m.size &&
      frango.y + frango.size > m.y
    ) {
      score++;
      desconto = score * 0.10;
      moedas.splice(moedas.indexOf(m), 1);
    }
  });

  obst.forEach((o) => {
    o.y += o.speed;
    ctx.drawImage(obstImg, o.x, o.y, o.size, o.size);

    if (
      frango.x < o.x + o.size &&
      frango.x + frango.size > o.x &&
      frango.y < o.y + o.size &&
      frango.y + frango.size > o.y
    ) {
      rodando = false;
      if (score > recorde) {
        recorde = score;
        localStorage.setItem("recorde", recorde);
      }
      alert(`üêî O Franguinho bateu!\nMoedas: ${score}\nDesconto: R$${desconto.toFixed(2)}`);
      location.reload();
    }
  });

  document.getElementById("info").innerText =
    `Moedas: ${score} | Desconto: R$${desconto.toFixed(2)} | Recorde: ${recorde}`;

  requestAnimationFrame(atualizar);
}

/* ===========================
   CONTROLES
================================ */
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") esquerda = true;
  if (e.key === "ArrowRight") direita = true;
});
document.addEventListener("keyup", e => {
  if (e.key === "ArrowLeft") esquerda = false;
  if (e.key === "ArrowRight") direita = false;
});

document.getElementById("leftBtn").ontouchstart = () => esquerda = true;
document.getElementById("leftBtn").ontouchend = () => esquerda = false;

document.getElementById("rightBtn").ontouchstart = () => direita = true;
document.getElementById("rightBtn").ontouchend = () => direita = false;

/* ===========================
   START
================================ */
document.getElementById("startBtn").onclick = () => {
  document.getElementById("startBtn").style.display = "none";
  document.getElementById("controles").style.display = "flex";
  canvas.style.display = "block";
  rodando = true;
  atualizar();
};
</script>

</body>
</html>
